<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Random Number Game</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <style>
    .hidden {
      display: none;
    }
    .bold {
      font-weight: 700;
    }
    .blue {
      color: blue;
    }
    .red {
      color: red;
    }
  </style>
</head>
<body>

  <h1>Random Number Game</h1>
  <form action="">
    <p class="bold">
      <label for="endnumber">Generate a number between 0 and </label>
      <input 
        type="number" 
        value="" 
        id="endnumber" 
        min="0" 
        required 
      >
    </p>
    <p>
      <label for="guessnumber">Guess the number </label>
      <input 
        type="number" 
        value="" 
        id="guessnumber" 
        min="0" 
        required 
      >
      <button type="submit">Play!</button>
    </p>

    <div id="resultviewer" class="hidden">
      <p>
        You chose : <span id="guessresult" class="bold"></span>, 
        the machine chose : <span id="randomresult" class="bold"></span>.
      </p>
      <p class="winorlose bold"></p>
    </div>
  </form>
  
  <script>
    const form = document.querySelector('form');
    const input = form.querySelectorAll('input[type="number"]');
    
    const resultViewer = form.querySelector('#resultviewer'); // result Viewer
    const guessNumberResult = resultViewer.querySelector('#guessresult'); // guess number result viewer
    const randomNumberResult = resultViewer.querySelector('#randomresult'); // random number result viewer
    const winOrLose = resultViewer.querySelector('.winorlose');
  
    // runtime input value check
    function inputValueRuntimeHandler(value) {
      const endNumberValue = parseInt(input[0].value); // input (range number)
      const guessNumberValue = parseInt(input[1].value); // input (gussing number)

      if (endNumberValue < 0 || guessNumberValue < 0) {
        // if the number is less than 0...
        inputOnchangeFunc(endNumberValue, guessNumberValue);

      } else if (endNumberValue < guessNumberValue) {
        // if the number is out of the range...
        alert('You selected the number out of the range!');
      }
    };

    // input value validiation check
    function inputOnchangeFunc (endNumberValue, guessNumberValue) {

      if (endNumberValue < 0 || guessNumberValue < 0) {
        // if the number is less than 0...
        alert('minimum number should be higher than 0');

      } else if (endNumberValue < guessNumberValue) {
        alert('You selected the number out of the range!');
      }
    };

    // when submit button is clicked....
    function submitBtnHandler(e) {
      e.preventDefault();
      const endNumberValue = parseInt(input[0].value); // input (range number)
      const guessNumberValue = parseInt(input[1].value); // input (gussing number)

      if (endNumberValue < 0 || guessNumberValue < 0) {
        // if the number is less than 0...
        inputOnchangeFunc(endNumberValue, guessNumberValue);

      } else if (0 <= guessNumberValue && guessNumberValue <= endNumberValue) {
        // if the number is between 0 to endNumber...
        const randomNumber = Math.round(Math.random() * endNumberValue); // machine number
        guessNumberResult.innerText = guessNumberValue;
        randomNumberResult.innerText = randomNumber;

        winOrLose.innerHTML = guessNumberValue < randomNumber ? '<span class="red">You lose! :( </span>' : '<span class="blue">You Win!üëç (or same number)</span>';
        resultViewer.classList.remove('hidden');

      } else {
        // if the number is out of the range...
        inputOnchangeFunc (endNumberValue, guessNumberValue)
      }
    };
    
    // event listener
    form.addEventListener('submit', submitBtnHandler); 

    for (let i = 0; i < input.length; i++) {
      input[i].addEventListener('change', inputValueRuntimeHandler);
    }
  </script>
</body>
</html>